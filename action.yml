# action.yml
name: 'Get secrets from hachicorp kv vault'
description: 'Gets secrets'
author: 'ergrassa'
branding:  
  icon: 'arrow-down-right'
  color: 'red'
inputs:
  url:
    description: 'Base url to vault, without /v1 part'
    required: true
  token:
    description: 'Access token to vault'
    required: true
  engine:
    description: 'Name of secret engine'
    required: true
  path:
    description: 'Base path for output'
runs:
  using: 'composite'
  steps:
    - run: |
        mkdir -p ${{ inputs.path }}
        pip install PyYAML
        pip install requests
        python ./main.py ${{ inputs.engine }} ${{ inputs.token }} ${{ inputs.url }} ${{ inputs.path }}
      shell: bash

